[
  {
    "submission_id": 1536442634,
    "code": "class Solution:\n    def countSubstrings(self, s: str) -> int:\n        n = len(s)\n        res = 0\n        \n        mod3 = [1, 0, 0]\n        sum3 = 0\n    \n        mod9 = [1] + [0] * 8\n        sum9 = 0\n    \n        mod7 = [1] + [0] * 6\n        sum7 = 0\n        \n        pow5 = 1\n    \n        for i, c in enumerate(s):\n            d = int(c)\n            sum3 = (sum3 + d) % 3\n            sum9 = (sum9 + d) % 9\n            sum7 = (sum7 * 10 + d) % 7\n            R = (sum7 * pow5) % 7\n    \n            if c in '125':\n                res += (i + 1)\n            elif c in '36':\n                res += mod3[sum3]\n            elif c == '9':\n                res += mod9[sum9]\n            elif c == '4':\n                if i == 0:\n                    res += 1\n                else:\n                    v = int(s[i - 1]) * 10 + d\n                    if v % 4 == 0:\n                        res += (i + 1)\n                    else:\n                        res += 1\n            elif c == '8':\n                if i == 0:\n                    res += 1\n                elif i == 1:\n                    v = int(s[i - 1]) * 10 + d\n                    if v % 8 == 0:\n                        res += 2\n                    else:\n                        res += 1\n                else:\n                    v1 = int(s[i - 1]) * 10 + d\n                    v2 = int(s[i - 2]) * 100 + int(s[i - 1]) * 10 + d\n                    add_two = 1 if v1 % 8 == 0 else 0\n                    add_three = (i - 1) if v2 % 8 == 0 else 0\n                    res += 1 + add_two + add_three\n    \n            if c == '7':\n                res += mod7[R]\n    \n            mod3[sum3] += 1\n            mod9[sum9] += 1\n            mod7[R] += 1\n    \n            pow5 = (pow5 * 5) % 7\n            # print(res)\n    \n        return res",
    "lang": "python3",
    "question_id": 3696,
    "contest_submission": 22452439
  },
  {
    "submission_id": 1536459645,
    "code": "class Solution:\n    def countSubstrings(self, s: str) -> int:\n        debug = False\n        ans = 0\n\n        hash_table_3 = collections.defaultdict(int)\n        hash_table_3[0] += 1\n        hash_table_9 = collections.defaultdict(int)\n        hash_table_9[0] += 1\n\n        digit_sum_3 = 0\n        digit_sum_9 = 0\n\n        for i,char in enumerate(s):\n            digit_sum_3 += int(char)\n            digit_sum_3 = digit_sum_3%3\n\n\n            digit_sum_9 += int(char)\n            digit_sum_9 = digit_sum_9%9\n\n\n            if char == \"1\":\n                ans += (i+1)\n            elif char == \"2\":\n                ans += (i+1)\n            elif char == \"3\":\n                ans += hash_table_3[digit_sum_3]\n            elif char == \"4\":\n                if i == 0:\n                    ans += 1\n                else:\n                    Z = int(s[i-1])*10 + int(s[i])\n                    if Z%4 == 0:\n                        ans += (i+1)\n                    else:\n                        ans += 1\n            elif char == \"5\":\n                ans += (i+1)\n\n            elif char == \"6\":\n                ans += hash_table_3[digit_sum_3]\n            elif char == \"8\":\n                ans += 1\n\n                if i-1 >= 0:\n                    Z = int(s[i-1])*10 + int(s[i])\n                    if Z%8 == 0:\n                        ans += 1\n                if i-2 >= 0:\n                    Z = int(s[i-2])*100 + int(s[i-1])*10 + int(s[i])\n                    if Z%8 == 0:\n                        ans += (i-2+1)\n            elif char == \"9\":\n                ans += hash_table_9[digit_sum_9]\n            #print(ans,digit_sum_9,hash_table_9,'3_data',digit_sum_3,hash_table_3)\n\n            hash_table_3[digit_sum_3] += 1\n            hash_table_9[digit_sum_9] += 1\n\n        curr_sums = [0]*10\n        curr_sums[0] = 1\n\n        curr = 0\n        #ans = 0\n        for i in range(len(s)):\n            curr = (10*curr + int(s[i]))%7\n            new_curr_sums = [0]*10\n            for j in range(len(curr_sums)):\n                new_curr_sums[(j*10)%7] += curr_sums[j]\n            curr_sums = list(new_curr_sums)\n\n            if s[i] == \"7\":\n                ans += curr_sums[curr]\n            curr_sums[curr] += 1\n\n        return ans\n                ",
    "lang": "python3",
    "question_id": 3696,
    "contest_submission": 22463871
  },
  {
    "submission_id": 1536441757,
    "code": "class Solution:\n    def countSubstrings(self, s: str) -> int:\n        ans = 0\n        dp = [[0] * i for i in range(10)]\n        for i in range(1, 10):\n            dp[i][0] = 1\n        for c in s:\n            num = int(c)\n            newdp = [[0] * i for i in range(10)]\n            for i in range(1, 10):\n                for j in range(i):\n                    newdp[i][(j * 10 + num) % i] += dp[i][j]\n            if num != 0:\n                ans += newdp[num][0]\n            for i in range(1, 10):\n                newdp[i][0] += 1\n            dp = newdp\n        return ans\n        ",
    "lang": "python3",
    "question_id": 3696,
    "contest_submission": 22451844
  }
]