[
  {
    "submission_id": 1695796312,
    "code": "class Solution:\n    def processStr(self, s: str, k: int) -> str:\n        n = len(s)\n        l = [0] * (n + 1)\n        for i, c in enumerate(s):\n            if c == '*':\n                l[i + 1] = max(l[i] - 1, 0)\n            elif c == '#':\n                l[i + 1] = l[i] * 2\n            elif c == '%':\n                l[i + 1] = l[i]\n            else :\n                l[i + 1] = l[i] + 1\n        if k < 0 or k >= l[n]:\n            return '.'\n\n        x = k\n        for i in range(n, 0, -1):\n            c = s[i - 1]\n            p = l[i - 1]\n            if c == '#':\n                if x >= p:\n                    x -= p\n            elif c == '%':\n                x = p - 1 - x\n            elif c == '*':\n                continue\n            else:\n                if x == p:\n                    return c\n        return '.'",
    "lang": "python3",
    "question_id": 3939,
    "contest_submission": 25027461
  },
  {
    "submission_id": 1695809620,
    "code": "class Solution:\n    def processStr(self, s: str, k: int) -> str:\n        ops = []\n        length = 0\n        for ch in s:\n            if 'a' <= ch <= 'z':\n                length += 1\n                ops.append(('lett', ch))\n            elif ch == '*':\n                if length > 0:\n                    length -= 1\n                    ops.append(('rem', True))\n                else:\n                    ops.append(('rem', False))\n            elif ch == '#':\n                length *= 2\n                ops.append(('dup', None))\n            elif ch == '%':\n                ops.append(('rev', None))\n\n        if k < 0 or k >= length:\n            return '.'\n\n        idx = k\n        cur_len = length\n        for op in reversed(ops):\n            typ, val = op\n            if typ == 'lett':\n                if idx == cur_len - 1:\n                    return val\n                cur_len -= 1\n            elif typ == 'rem':\n                if val:\n                    cur_len += 1\n            elif typ == 'dup':\n                prev_len = cur_len // 2\n                if idx >= prev_len:\n                    idx -= prev_len\n                cur_len = prev_len\n            elif typ == 'rev':\n                idx = cur_len - 1 - idx\n\n        return '.'\n",
    "lang": "python3",
    "question_id": 3939,
    "contest_submission": 25037915
  },
  {
    "submission_id": 1695823832,
    "code": "class Solution:\n    def processStr(self, s: str, k: int) -> str:\n        n = len(s)\n        Ls = [0] * n\n        cur = 0\n        \n        # forward pass: track length\n        for i, c in enumerate(s):\n            if c == '*':\n                if cur: cur -= 1\n            elif c == '#':\n                cur *= 2\n            elif c == '%':\n                pass\n            else:\n                cur += 1\n            Ls[i] = cur\n        \n        # out of bounds?\n        if k < 0 or k >= Ls[-1]:\n            return '.'\n\n        idx = k\n        # backward pass: undo ops\n        for i in range(n - 1, -1, -1):\n            c = s[i]\n            prev = Ls[i - 1] if i else 0\n\n            if c == '*':\n                continue\n            if c == '#':\n                if prev:\n                    idx %= prev\n            elif c == '%':\n                if prev:\n                    idx = prev - idx - 1\n            else:\n                if idx == prev:\n                    return c\n                # otherwise idx < prev and we keep going\n\n        return '.'\n",
    "lang": "python3",
    "question_id": 3939,
    "contest_submission": 25048681
  }
]